<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../../../../static/css/application.min.css"/>
    <link rel="stylesheet" href="../../../_static/default.css"/>
    <link rel="stylesheet" href="../../../_static/override.css"/>
    <link rel="stylesheet" href="../../../_static/pygments.css"/>
    <title>wte.helpers.frontend</title>
  </head>
  <body class="help">
    <nav>
      <ul class="breadcrumbs">
        <li><a href="../../../index.html">Home</a></li>
        
          <li><a href="../../index.html">Module code</a></li>
        
          <li><a href="../../wte.html">wte</a></li>
        
          <li><a href="../helpers.html">wte.helpers</a></li>
        
        <li>wte.helpers.frontend</li>
      </ul>
      <div class="row">
        <div class="column small-12">
          <h1>Source code for wte.helpers.frontend</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">###############################################################</span>
<span class="sd">:mod:`wte.helpers.frontend` -- Helpers for the frontend display</span>
<span class="sd">###############################################################</span>

<span class="sd">The :mod:`~wte.helpers.frontend` module provides helper functionality used to</span>
<span class="sd">render the frontend page displays.</span>

<span class="sd">.. moduleauthor:: Mark Hall &lt;mark.hall@work.room3b.eu&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">inflect</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="kn">from</span> <span class="nn">wte.util</span> <span class="kn">import</span> <span class="n">get_config_setting</span>

<span class="n">inflector</span> <span class="o">=</span> <span class="n">inflect</span><span class="o">.</span><span class="n">engine</span><span class="p">()</span>


<div class="viewcode-block" id="html_id"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.html_id">[docs]</a><span class="k">def</span> <span class="nf">html_id</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Turns a given text into a valid HTML id attribute value. Removes</span>
<span class="sd">    spaces and full-stops.</span>

<span class="sd">    :param text: The text to convert</span>
<span class="sd">    :type text: `unicode`</span>
<span class="sd">    :return: The corresponding HTML id</span>
<span class="sd">    :rtype: :func:`unicode`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span></div>


<span class="n">CODEMIRROR_MODES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;text/html&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;javascript&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;css&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;xml&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;htmlmixed&#39;</span><span class="p">,</span>
                                  <span class="p">(</span><span class="s1">&#39;../addon/fold/&#39;</span><span class="p">,</span> <span class="s1">&#39;xml-fold&#39;</span><span class="p">),</span>
                                  <span class="p">(</span><span class="s1">&#39;../addon/edit&#39;</span><span class="p">,</span> <span class="s1">&#39;matchtags&#39;</span><span class="p">)],</span>
                    <span class="s1">&#39;text/css&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;css&#39;</span><span class="p">,</span>
                                 <span class="p">(</span><span class="s1">&#39;../addon/edit&#39;</span><span class="p">,</span> <span class="s1">&#39;matchbrackets&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;lint&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;csslint&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;css-lint&#39;</span><span class="p">)],</span>
                    <span class="s1">&#39;text/javascript&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;javascript&#39;</span><span class="p">,</span>
                                        <span class="p">(</span><span class="s1">&#39;../addon/edit&#39;</span><span class="p">,</span> <span class="s1">&#39;matchbrackets&#39;</span><span class="p">),</span>
                                        <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;lint&#39;</span><span class="p">),</span>
                                        <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;jshint&#39;</span><span class="p">),</span>
                                        <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;javascript-lint&#39;</span><span class="p">)],</span>
                    <span class="s1">&#39;application/javascript&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;javascript&#39;</span><span class="p">,</span>
                                               <span class="p">(</span><span class="s1">&#39;../addon/edit&#39;</span><span class="p">,</span> <span class="s1">&#39;matchbrackets&#39;</span><span class="p">),</span>
                                               <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;lint&#39;</span><span class="p">),</span>
                                               <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;jshint&#39;</span><span class="p">),</span>
                                               <span class="p">(</span><span class="s1">&#39;../addon/lint&#39;</span><span class="p">,</span> <span class="s1">&#39;javascript-lint&#39;</span><span class="p">)],</span>
                    <span class="s1">&#39;text/x-rst&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;python&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;stex&#39;</span><span class="p">,</span>
                                   <span class="p">(</span><span class="s1">&#39;../addon/mode&#39;</span><span class="p">,</span> <span class="s1">&#39;overlay&#39;</span><span class="p">),</span>
                                   <span class="s1">&#39;rst&#39;</span><span class="p">]}</span>


<div class="viewcode-block" id="codemirror_scripts"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.codemirror_scripts">[docs]</a><span class="k">def</span> <span class="nf">codemirror_scripts</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">mimetypes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates the ``&lt;script&gt;`` tags necessary to load the CodeMirror mode</span>
<span class="sd">    JS files for the given list of ``mimetypes``.</span>

<span class="sd">    :param request: The request to use for generating URLs</span>
<span class="sd">    :type request: `~pyramid.request.Request`</span>
<span class="sd">    :param mimetypes: The mimetypes to load the CodeMirror modes for</span>
<span class="sd">    :type mimetypes: `list` of `unicode`</span>
<span class="sd">    :return: The necessary ``&lt;script&gt;`` tags</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">modes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">mimetype</span> <span class="ow">in</span> <span class="n">mimetypes</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">in</span> <span class="n">CODEMIRROR_MODES</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">CODEMIRROR_MODES</span><span class="p">[</span><span class="n">mimetype</span><span class="p">]:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">mode</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
    <span class="n">scripts</span> <span class="o">=</span> <span class="p">[</span><span class="n">request</span><span class="o">.</span><span class="n">static_url</span><span class="p">(</span><span class="s1">&#39;wte:static/js/codemirror/codemirror.js&#39;</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">modes</span><span class="p">:</span>
        <span class="n">script</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">static_url</span><span class="p">(</span><span class="s1">&#39;wte:static/js/codemirror/mode/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">.js&#39;</span> <span class="o">%</span> <span class="n">mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">script</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">scripts</span><span class="p">:</span>
            <span class="n">scripts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">scripts</span></div>


<span class="n">CODEMIRROR_OPTIONS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;text/html&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;matchTags&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
                      <span class="s1">&#39;text/css&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;gutters&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;CodeMirror-lint-markers&#39;</span><span class="p">],</span>
                                   <span class="s1">&#39;matchBrackets&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                                   <span class="s1">&#39;lint&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
                      <span class="s1">&#39;text/javascript&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lint&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                                          <span class="s1">&#39;gutters&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;CodeMirror-lint-markers&#39;</span><span class="p">],</span>
                                          <span class="s1">&#39;matchBrackets&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
                      <span class="s1">&#39;application/javascript&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;gutters&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;CodeMirror-lint-markers&#39;</span><span class="p">],</span>
                                                 <span class="s1">&#39;matchBrackets&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                                                 <span class="s1">&#39;lint&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}}</span>


<div class="viewcode-block" id="codemirror_options"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.codemirror_options">[docs]</a><span class="k">def</span> <span class="nf">codemirror_options</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">mimetype</span><span class="p">,</span> <span class="n">include_mode</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates a JSON representation of CodeMirror options that are valid</span>
<span class="sd">    for the given ``mimetype``.</span>

<span class="sd">    :param request: The current request</span>
<span class="sd">    :type request: :class:`~pyramid.request.Request`</span>
<span class="sd">    :param mimetype: The mimetype to generate CodeMirror options for</span>
<span class="sd">    :type mimetype: `unicode`</span>
<span class="sd">    :param include_mode: Whether to include the ``mode`` setting in the options</span>
<span class="sd">    :type include_mode: `bool`</span>
<span class="sd">    :return: The JSON representation of options</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;theme&#39;</span><span class="p">:</span> <span class="n">get_config_setting</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;codemirror.theme&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">include_mode</span><span class="p">:</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mimetype</span>
    <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">in</span> <span class="n">CODEMIRROR_OPTIONS</span><span class="p">:</span>
        <span class="n">options</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">CODEMIRROR_OPTIONS</span><span class="p">[</span><span class="n">mimetype</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div>


<div class="viewcode-block" id="confirm_action"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.confirm_action">[docs]</a><span class="k">def</span> <span class="nf">confirm_action</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">cancel</span><span class="p">,</span> <span class="n">ok</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates a confirmation JSON object for use with the jQuery.postLink() plugin.</span>

<span class="sd">    :param title: The title of the confirmation dialog box</span>
<span class="sd">    :type title: ``unicode``</span>
<span class="sd">    :param message: The main message to show</span>
<span class="sd">    :type message: ``unicode``</span>
<span class="sd">    :param cancel: The cancel button&#39;s settings</span>
<span class="sd">    :type cancel: ``dict`` or ``unicode``</span>
<span class="sd">    :param ok: The ok button&#39;s settings</span>
<span class="sd">    :type ok: ``dict`` or ``unicode``</span>
<span class="sd">    :return: JSON object</span>
<span class="sd">    :rtype: :func:`unicode`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
                       <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
                       <span class="s1">&#39;cancel&#39;</span><span class="p">:</span> <span class="n">cancel</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cancel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">cancel</span><span class="p">},</span>
                       <span class="s1">&#39;ok&#39;</span><span class="p">:</span> <span class="n">ok</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ok</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">ok</span><span class="p">}})</span></div>


<div class="viewcode-block" id="confirm_delete"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.confirm_delete">[docs]</a><span class="k">def</span> <span class="nf">confirm_delete</span><span class="p">(</span><span class="n">obj_type</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">has_parts</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates the confirmation JSON object for use with the jQuery.postLink() plugin.</span>

<span class="sd">    :param obj_type: The type of object that is being deleted</span>
<span class="sd">    :type obj_type: ``unicode``</span>
<span class="sd">    :param title: The title of the object that is being delete</span>
<span class="sd">    :type title: ``unicode``</span>
<span class="sd">    :param has_parts: Whether to add the suffix &quot; and all its parts&quot;</span>
<span class="sd">    :type has_parts: ``bool``</span>
<span class="sd">    :return: JSON object</span>
<span class="sd">    :rtype: :func:`unicode`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Please confirm that you wish to delete the </span><span class="si">%s</span><span class="s1"> &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj_type</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">has_parts</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> and all its parts.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">confirm_action</span><span class="p">(</span><span class="s1">&#39;Delete this </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj_type</span><span class="p">),</span>
                          <span class="n">msg</span><span class="p">,</span>
                          <span class="s2">&quot;Don&#39;t delete&quot;</span><span class="p">,</span>
                          <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Delete&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;class_&#39;</span><span class="p">:</span> <span class="s1">&#39;alert&#39;</span><span class="p">})</span></div>


<div class="viewcode-block" id="MenuBuilder"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.MenuBuilder">[docs]</a><span class="k">class</span> <span class="nc">MenuBuilder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The :class:`~wte.helpers.frontend.MenuBuilder` helps with creating the ``list``</span>
<span class="sd">    structure used for creating the icon-menubar. Call :func:`~wte.helpers.frontend.MenuBuilder.group`</span>
<span class="sd">    to start a new group of menu items. Call :func:`~wte.helpers.frontend.MenuBuilder.item`</span>
<span class="sd">    to add a menu item to the current group. :func:`~wte.helpers.frontend.MenuBuilder.generate`</span>
<span class="sd">    then generates the final structure for use in the menubar.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_group</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="MenuBuilder.group"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.MenuBuilder.group">[docs]</a>    <span class="k">def</span> <span class="nf">group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new group to the lost of groups in this :class:`~wte.helpers.frontend.MenuBuilder`.</span>

<span class="sd">        :param label: The menu group&#39;s label</span>
<span class="sd">        :type label: `unicode`</span>
<span class="sd">        :param icon: The optional icon for this group. An icon must be provided in order to</span>
<span class="sd">                     enable highlighting of menu items</span>
<span class="sd">        :type icon: `unicode`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_group</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
                       <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="k">if</span> <span class="n">icon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">[</span><span class="s1">&#39;icon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">icon</span></div>

<div class="viewcode-block" id="MenuBuilder.menu"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.MenuBuilder.menu">[docs]</a>    <span class="k">def</span> <span class="nf">menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">href</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">highlight</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new menu item to the current group. Will create a new group with an empty</span>
<span class="sd">        label if :func:`~wte.helpers.frontend.MenuBuilder.group` has not been called</span>

<span class="sd">        :param label: The menu item&#39;s label</span>
<span class="sd">        :type label: `unicode`</span>
<span class="sd">        :param href: The URL that the menu item loads</span>
<span class="sd">        :type href: `unicode`</span>
<span class="sd">        :param icon: The optional icon for this menu item</span>
<span class="sd">        :type icon: `unicode`</span>
<span class="sd">        :param highlight: Whether to highlight the menu item by displaying it at the top level</span>
<span class="sd">        :type highlight: `boolean`</span>
<span class="sd">        :param attrs: Additional attributes to set for the menu item link</span>
<span class="sd">        :type attrs: :class:`dict`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_group</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>
            <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">href</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;href&#39;</span><span class="p">:</span> <span class="n">href</span><span class="p">}</span>
        <span class="n">item</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;visible&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
                <span class="s1">&#39;attrs&#39;</span><span class="p">:</span> <span class="n">attrs</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">icon</span><span class="p">:</span>
            <span class="n">item</span><span class="p">[</span><span class="s1">&#39;icon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">icon</span>
        <span class="k">if</span> <span class="n">highlight</span><span class="p">:</span>
            <span class="n">item</span><span class="p">[</span><span class="s1">&#39;highlight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenuBuilder.generate"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.MenuBuilder.generate">[docs]</a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate the final menu structure.</span>

<span class="sd">        :return: The list of menu groups with their menu items</span>
<span class="sd">        :r_type: ``list`` of menu groups</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_group</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span></div></div>


<div class="viewcode-block" id="readable_timedelta"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.readable_timedelta">[docs]</a><span class="k">def</span> <span class="nf">readable_timedelta</span><span class="p">(</span><span class="n">delta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a :class:`datetime.timedelta` into a human-readable string.</span>

<span class="sd">    :param delta: The time-delta to convert</span>
<span class="sd">    :type delta: :class:`datetime.timedelta`</span>
<span class="sd">    :return: The human-readable string representation of the ``delta``</span>
<span class="sd">    :rtype: :func:`unicode`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">number_unit</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Formats a string &quot;number unit&quot;, where the unit is appropriately</span>
<span class="sd">        pluralised. Optionally the parameter ``fraction`` can be inserted</span>
<span class="sd">        between the two.</span>

<span class="sd">        :param number: The number to return</span>
<span class="sd">        :type number: :func:`int`</span>
<span class="sd">        :param unit: The unit to return with the number (singular)</span>
<span class="sd">        :type unit: :func:`unicode`</span>
<span class="sd">        :param fraction: The fraction to insert between number and unit</span>
<span class="sd">        :type fraction: :func:`unicode`</span>
<span class="sd">        :return: The string &quot;number unit&quot; or &quot;number fraction unit&quot;</span>
<span class="sd">        :rtype: :func:`unicode`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fraction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">fraction</span><span class="p">,</span> <span class="n">inflector</span><span class="o">.</span><span class="n">plural</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">number</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">inflector</span><span class="o">.</span><span class="n">plural</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">number</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">time_string</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts the ``days``, ``hours``, ``minutes``, and ``seconds`` into</span>
<span class="sd">        a human-readable format.</span>

<span class="sd">        :param days: The number of days to the timestamp</span>
<span class="sd">        :type days: :func:`int`</span>
<span class="sd">        :param hours: The number of hours to the timestamp</span>
<span class="sd">        :type hours: :func:`int`</span>
<span class="sd">        :param minutes: The number of minutes to the timestamp</span>
<span class="sd">        :type minutes: :func:`int`</span>
<span class="sd">        :param seconds: The number of seconds to the timestamp</span>
<span class="sd">        :type seconds: :func:`int`</span>
<span class="sd">        :return: The human-readable representation</span>
<span class="sd">        :rtype: :func:`unicode`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;about </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">days</span> <span class="o">/</span> <span class="mf">30.0</span><span class="p">),</span> <span class="s1">&#39;month&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">14</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;about </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">days</span> <span class="o">/</span> <span class="mf">7.0</span><span class="p">),</span> <span class="s1">&#39;week&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">16</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;a bit less than </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">days</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;about </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="s1">&#39;and a half&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;about </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> and </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">number_unit</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">),</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;a bit less than </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">hours</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="s1">&#39;and a half&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">seconds</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> and </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">number_unit</span><span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">),</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">minutes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;minute&#39;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> and </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">number_unit</span><span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">),</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">minutes</span><span class="p">,</span> <span class="s1">&#39;minute&#39;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">seconds</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">minutes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;minute&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">minutes</span><span class="p">,</span> <span class="s1">&#39;minute&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">seconds</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;less than a minute&#39;</span>
        <span class="k">elif</span> <span class="n">seconds</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;less than 30 seconds&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">number_unit</span><span class="p">(</span><span class="n">seconds</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">delta</span><span class="o">.</span><span class="n">days</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> ago&#39;</span> <span class="o">%</span> <span class="n">time_string</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">days</span><span class="p">,</span>
                                      <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">/</span> <span class="mi">3600</span><span class="p">)),</span>
                                      <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">%</span> <span class="mi">3600</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)),</span>
                                      <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">%</span> <span class="mi">3600</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;in </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">time_string</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">days</span><span class="p">,</span>
                                     <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">/</span> <span class="mi">3600</span><span class="p">)),</span>
                                     <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">%</span> <span class="mi">3600</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)),</span>
                                     <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">%</span> <span class="mi">3600</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span><span class="p">)))</span></div>


<span class="n">DISPLAY_MODES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;module&#39;</span><span class="p">:</span> <span class="s1">&#39;_module.html&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;tutorial&#39;</span><span class="p">:</span> <span class="s1">&#39;_tutorial.html&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;exercise&#39;</span><span class="p">:</span> <span class="s1">&#39;_exercise.html&#39;</span><span class="p">},</span>
                 <span class="s1">&#39;three_pane_html&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="s1">&#39;_page.html&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="s1">&#39;_task.html&#39;</span><span class="p">},</span>
                 <span class="s1">&#39;text_only&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="s1">&#39;_page.html&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="s1">&#39;_task.html&#39;</span><span class="p">}}</span>


<div class="viewcode-block" id="template_for_part"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.template_for_part">[docs]</a><span class="k">def</span> <span class="nf">template_for_part</span><span class="p">(</span><span class="n">part</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the correct partial template path for a given</span>
<span class="sd">    :class:`~wte.models.Part`. If there is no partial template for the given</span>
<span class="sd">    :class:`~wte.models.Part`, then ``None`` is returned.</span>

<span class="sd">    :param part: The :class:`~wte.models.Part` to generate the template path for</span>
<span class="sd">    :type part: :class:`~wte.models.Part`</span>
<span class="sd">    :return: The partial template path or ``None``</span>
<span class="sd">    :return_type: ``string``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">part_type</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">type</span>
    <span class="n">display_mode</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">display_mode</span>
    <span class="k">if</span> <span class="n">display_mode</span> <span class="o">==</span> <span class="s1">&#39;inherit&#39;</span><span class="p">:</span>
        <span class="n">display_mode</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">display_mode</span>
    <span class="k">if</span> <span class="n">display_mode</span> <span class="ow">in</span> <span class="n">DISPLAY_MODES</span> <span class="ow">and</span> <span class="n">part_type</span> <span class="ow">in</span> <span class="n">DISPLAY_MODES</span><span class="p">[</span><span class="n">display_mode</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">display_mode</span><span class="p">,</span> <span class="n">DISPLAY_MODES</span><span class="p">[</span><span class="n">display_mode</span><span class="p">][</span><span class="n">part_type</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">part_type</span> <span class="ow">in</span> <span class="n">DISPLAY_MODES</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s1">&#39;default/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">DISPLAY_MODES</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">][</span><span class="n">part_type</span><span class="p">])</span>
    <span class="k">return</span> <span class="bp">None</span></div>


<div class="viewcode-block" id="natural_list"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.natural_list">[docs]</a><span class="k">def</span> <span class="nf">natural_list</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="n">final_separator</span><span class="o">=</span><span class="s1">&#39; &amp; &#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a string representation of the ``items`` list. For an empty list</span>
<span class="sd">    or a single item the value is returned. For a list of two items, the items</span>
<span class="sd">    are joined together using the ``final_separator``. For a list of more than</span>
<span class="sd">    two items, the all but the last item are joined using ``separator`` and the</span>
<span class="sd">    last item is joined using ``final_separator``.</span>
<span class="sd">    </span>
<span class="sd">    :param items: The list of items to join</span>
<span class="sd">    :type items: :func:`list`</span>
<span class="sd">    :param separator: The separator to use when more than 2 items are joined.</span>
<span class="sd">                      Defaults to &#39;, &#39;.</span>
<span class="sd">    :type separator: :func:`unicode`</span>
<span class="sd">    :param final_separator: The separator to use for the last two items in the list.</span>
<span class="sd">                            Defaults to &#39; &amp; &#39;.</span>
<span class="sd">    :type separator: :func:`unicode`</span>
<span class="sd">    :return: A string representation of the list</span>
<span class="sd">    :r_type: :func:`unicode`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_separator</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">final_separator</span><span class="p">,</span> <span class="n">items</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span></div>


<div class="viewcode-block" id="set_list"><a class="viewcode-back" href="../../../api/wte_helpers_frontend.html#wte.helpers.frontend.set_list">[docs]</a><span class="k">def</span> <span class="nf">set_list</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a string representation of the unique items in the ``items``. The</span>
<span class="sd">    ``items`` must be a :func:`list` of :func:`tuple` ``(item, count)`` as returned</span>
<span class="sd">    by :func:`~wte.util.ordered_counted_set`.</span>
<span class="sd">    </span>
<span class="sd">    :param items: The list of items to transform into a string</span>
<span class="sd">    :type istems: :func:`list` of :func:`tuple`</span>
<span class="sd">    :return: A string containing all unique items</span>
<span class="sd">    :r_type: :func:`unicode`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">natural_list</span><span class="p">([</span><span class="n">inflector</span><span class="o">.</span><span class="n">plural</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span> <span class="ow">in</span> <span class="n">items</span><span class="p">])</span></div>
</pre></div>
        </div>
      </div>
      <ul class="pagination text-center" role="navigation" aria-label="Pagination">
        
        
      </ul>
    </nav>
  </body>
</html>